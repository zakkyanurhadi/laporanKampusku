<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Reports - Campus Reporting System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        .mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .status-badge {
            @apply px-3 py-1 rounded-full text-xs font-medium;
        }
        .status-pending { @apply bg-amber-100 text-amber-800; }
        .status-processing { @apply bg-blue-100 text-blue-800; }
        .status-completed { @apply bg-green-100 text-green-800; }
        .status-rejected { @apply bg-red-100 text-red-800; }
        .status-validating { @apply bg-purple-100 text-purple-800; }
        .priority-indicator {
            @apply w-2 h-2 rounded-full;
        }
        .priority-low { @apply bg-green-400; }
        .priority-medium { @apply bg-yellow-400; }
        .priority-high { @apply bg-orange-400; }
        .priority-critical { @apply bg-red-400; }
        .data-table {
            @apply w-full text-sm;
        }
        .data-table th {
            @apply px-4 py-3 text-left font-medium text-gray-700 bg-gray-50 border-b border-gray-200;
        }
        .data-table td {
            @apply px-4 py-3 border-b border-gray-100;
        }
        .data-table tr:hover {
            @apply bg-gray-50;
        }
        .filter-tab {
            @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors;
        }
        .filter-tab.active {
            @apply bg-blue-600 text-white;
        }
        .filter-tab:not(.active) {
            @apply text-gray-600 hover:text-gray-900 hover:bg-gray-100;
        }
    </style>
<base target="_blank">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <span class="text-xl font-bold text-gray-900">Campus Reports</span>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-gray-600 hover:text-gray-900 transition-colors">Dashboard</a>
                    <a href="submit-report.html" class="text-gray-600 hover:text-gray-900 transition-colors">Submit Report</a>
                    <a href="my-reports.html" class="text-blue-600 font-medium border-b-2 border-blue-600 pb-1">My Reports</a>
                    <a href="admin-dashboard.html" class="text-gray-600 hover:text-gray-900 transition-colors">Admin</a>
                    
                    <!-- User Profile -->
                    <div class="flex items-center space-x-2">
                        <img src="resources/user-avatar-1.jpg" alt="User Avatar" class="w-8 h-8 rounded-full object-cover">
                        <span class="text-sm font-medium text-gray-700">Sarah Johnson</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">My Reports</h1>
                    <p class="text-gray-600 mt-1">Manage and track your submitted reports</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" onclick="exportMyReports()">
                        Export Reports
                    </button>
                    <a href="submit-report.html" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Submit New Report
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Statistics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Total Submitted</p>
                        <p class="text-3xl font-bold text-gray-900" id="totalSubmitted">12</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">In Progress</p>
                        <p class="text-3xl font-bold text-gray-900" id="inProgressCount">5</p>
                    </div>
                    <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Completed</p>
                        <p class="text-3xl font-bold text-gray-900" id="completedCount">7</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Avg Resolution</p>
                        <p class="text-3xl font-bold text-gray-900" id="avgResolution">2.1</p>
                        <p class="text-sm text-gray-500">days</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-lg font-semibold text-gray-900">Filter Reports</h2>
                <div class="flex items-center space-x-4">
                    <input type="text" placeholder="Search your reports..." 
                           class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           id="searchMyReports" onkeyup="filterMyReports()">
                    <button class="text-gray-400 hover:text-gray-600" onclick="clearSearch()">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="flex items-center space-x-2 mb-6">
                <button class="filter-tab active" onclick="filterByStatus('all')" id="tab-all">All Reports</button>
                <button class="filter-tab" onclick="filterByStatus('pending')" id="tab-pending">Pending</button>
                <button class="filter-tab" onclick="filterByStatus('processing')" id="tab-processing">In Progress</button>
                <button class="filter-tab" onclick="filterByStatus('validating')" id="tab-validating">Validating</button>
                <button class="filter-tab" onclick="filterByStatus('completed')" id="tab-completed">Completed</button>
                <button class="filter-tab" onclick="filterByStatus('rejected')" id="tab-rejected">Rejected</button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                    <select class="w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                            id="categoryFilter" onchange="filterMyReports()">
                        <option value="">All Categories</option>
                        <option value="infrastructure">Infrastructure</option>
                        <option value="facilities">Facilities</option>
                        <option value="academic">Academic</option>
                        <option value="security">Security</option>
                        <option value="maintenance">Maintenance</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
                    <select class="w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                            id="dateFilter" onchange="filterMyReports()">
                        <option value="">All Time</option>
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
                    <select class="w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                            id="priorityFilter" onchange="filterMyReports()">
                        <option value="">All Priorities</option>
                        <option value="critical">Critical</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Reports List -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold text-gray-900">Your Reports</h2>
                    <div class="flex items-center space-x-2 text-sm text-gray-600">
                        <span id="reportsCount">Showing 12 of 12 reports</span>
                        <button class="text-blue-600 hover:text-blue-800" onclick="refreshMyReports()">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th class="w-12"></th>
                            <th>Report ID</th>
                            <th>Title</th>
                            <th>Category</th>
                            <th>Status</th>
                            <th>Priority</th>
                            <th>Submitted</th>
                            <th>Last Updated</th>
                            <th>Assigned To</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="myReportsTable">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Empty State -->
            <div id="emptyState" class="hidden text-center py-12">
                <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No reports found</h3>
                <p class="text-gray-600 mb-4">You haven't submitted any reports yet or none match your current filters.</p>
                <a href="submit-report.html" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Submit Your First Report
                </a>
            </div>
        </div>

        <!-- Pagination -->
        <div class="flex items-center justify-between mt-6">
            <div class="text-sm text-gray-600">
                <span id="paginationInfo">Showing 1 to 10 of 12 results</span>
            </div>
            <div class="flex items-center space-x-2" id="paginationControls">
                <button class="px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors" onclick="previousPage()">
                    Previous
                </button>
                <span class="px-3 py-2 bg-blue-600 text-white rounded-lg">1</span>
                <button class="px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors" onclick="nextPage()">
                    Next
                </button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center text-gray-600">
                <p>&copy; 2024 Campus Reporting System. Streamlining university operations through technology.</p>
            </div>
        </div>
    </footer>

    <script>
        // Sample data for user's reports
        const myReportsData = [
            {
                id: 'L2510010012',
                title: 'Broken Light Fixture in Engineering Building',
                category: 'infrastructure',
                status: 'processing',
                priority: 'medium',
                assignedTo: 'Maintenance Team A',
                submittedDate: '2024-01-20T10:30:00Z',
                lastUpdated: '2024-01-22T14:15:00Z',
                hasPhotos: true,
                location: 'Engineering Building, Room 205'
            },
            {
                id: 'L2510010011',
                title: 'AC Not Working in Library Study Area',
                category: 'facilities',
                status: 'completed',
                priority: 'high',
                assignedTo: 'HVAC Team',
                submittedDate: '2024-01-18T14:20:00Z',
                lastUpdated: '2024-01-21T09:30:00Z',
                hasPhotos: false,
                location: 'Main Library, 3rd Floor'
            },
            {
                id: 'L2510010010',
                title: 'Damaged Sidewalk Near Student Center',
                category: 'infrastructure',
                status: 'completed',
                priority: 'low',
                assignedTo: 'Grounds Maintenance',
                submittedDate: '2024-01-15T09:15:00Z',
                lastUpdated: '2024-01-19T16:45:00Z',
                hasPhotos: true,
                location: 'Student Center Walkway'
            },
            {
                id: 'L2510010009',
                title: 'Projector Issue in Lecture Hall B',
                category: 'academic',
                status: 'processing',
                priority: 'high',
                assignedTo: 'AV Support Team',
                submittedDate: '2024-01-12T08:45:00Z',
                lastUpdated: '2024-01-20T11:20:00Z',
                hasPhotos: false,
                location: 'Lecture Hall B'
            },
            {
                id: 'L2510010008',
                title: 'Security Camera Outage - Parking Lot C',
                category: 'security',
                status: 'completed',
                priority: 'high',
                assignedTo: 'Security Systems',
                submittedDate: '2024-01-10T16:30:00Z',
                lastUpdated: '2024-01-18T13:00:00Z',
                hasPhotos: false,
                location: 'Parking Lot C'
            },
            {
                id: 'L2510010007',
                title: 'Water Fountain Not Working - Science Building',
                category: 'facilities',
                status: 'pending',
                priority: 'medium',
                assignedTo: 'Facilities Team',
                submittedDate: '2024-01-08T11:20:00Z',
                lastUpdated: '2024-01-08T11:20:00Z',
                hasPhotos: true,
                location: 'Science Building, 1st Floor'
            },
            {
                id: 'L2510010006',
                title: 'Broken Desk in Classroom 305',
                category: 'academic',
                status: 'processing',
                priority: 'low',
                assignedTo: 'Maintenance Team B',
                submittedDate: '2024-01-05T13:45:00Z',
                lastUpdated: '2024-01-15T10:30:00Z',
                hasPhotos: true,
                location: 'Arts Building, Room 305'
            },
            {
                id: 'L2510010005',
                title: 'Graffiti on Campus Wall',
                category: 'maintenance',
                status: 'completed',
                priority: 'medium',
                assignedTo: 'Campus Maintenance',
                submittedDate: '2024-01-03T15:10:00Z',
                lastUpdated: '2024-01-12T14:20:00Z',
                hasPhotos: true,
                location: 'Near Gymnasium'
            },
            {
                id: 'L2510010004',
                title: 'Wi-Fi Signal Weak in Dormitory',
                category: 'infrastructure',
                status: 'validating',
                priority: 'high',
                assignedTo: 'IT Support Team',
                submittedDate: '2023-12-28T09:00:00Z',
                lastUpdated: '2024-01-14T16:15:00Z',
                hasPhotos: false,
                location: 'Student Dormitory, Building A'
            },
            {
                id: 'L2510010003',
                title: 'Vending Machine Out of Order',
                category: 'facilities',
                status: 'completed',
                priority: 'low',
                assignedTo: 'Facilities Management',
                submittedDate: '2023-12-25T12:30:00Z',
                lastUpdated: '2023-12-30T11:45:00Z',
                hasPhotos: true,
                location: 'Student Center, 1st Floor'
            },
            {
                id: 'L2510010002',
                title: 'Street Light Not Working - Main Entrance',
                category: 'infrastructure',
                status: 'completed',
                priority: 'high',
                assignedTo: 'Electrical Team',
                submittedDate: '2023-12-20T18:20:00Z',
                lastUpdated: '2023-12-24T09:00:00Z',
                hasPhotos: false,
                location: 'Main Campus Entrance'
            },
            {
                id: 'L2510010001',
                title: 'Restroom Maintenance - Library 2nd Floor',
                category: 'maintenance',
                status: 'completed',
                priority: 'medium',
                assignedTo: 'Cleaning Services',
                submittedDate: '2023-12-15T10:15:00Z',
                lastUpdated: '2023-12-22T14:30:00Z',
                hasPhotos: false,
                location: 'Library, 2nd Floor'
            }
        ];

        let filteredReports = [...myReportsData];
        let currentPage = 1;
        const reportsPerPage = 10;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeMyReports();
            populateMyReportsTable();
            updateStatistics();
        });

        function initializeMyReports() {
            console.log('My Reports page initialized');
        }

        function populateMyReportsTable() {
            const tableBody = document.getElementById('myReportsTable');
            const emptyState = document.getElementById('emptyState');
            
            if (filteredReports.length === 0) {
                tableBody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            tableBody.innerHTML = '';
            
            // Pagination
            const startIndex = (currentPage - 1) * reportsPerPage;
            const endIndex = startIndex + reportsPerPage;
            const paginatedReports = filteredReports.slice(startIndex, endIndex);
            
            paginatedReports.forEach(report => {
                const row = createMyReportRow(report);
                tableBody.appendChild(row);
            });
            
            updatePagination();
            
            // Animate table rows
            anime({
                targets: '#myReportsTable tr',
                translateY: [20, 0],
                opacity: [0, 1],
                delay: anime.stagger(100),
                duration: 600,
                easing: 'easeOutExpo'
            });
        }

        function createMyReportRow(report) {
            const row = document.createElement('tr');
            const timeAgo = getTimeAgo(report.submittedDate);
            const lastUpdated = getTimeAgo(report.lastUpdated);
            
            row.innerHTML = `
                <td>
                    ${report.hasPhotos ? 
                        '<svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>' : 
                        '<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>'
                    }
                </td>
                <td class="mono text-blue-600">${report.id}</td>
                <td class="font-medium text-gray-900">
                    <div>
                        <div class="font-medium">${report.title}</div>
                        <div class="text-xs text-gray-500">${report.location}</div>
                    </div>
                </td>
                <td class="text-gray-600 capitalize">${report.category}</td>
                <td><span class="status-badge status-${report.status}">${formatStatus(report.status)}</span></td>
                <td>
                    <div class="flex items-center space-x-2">
                        <div class="priority-indicator priority-${report.priority}"></div>
                        <span class="text-sm text-gray-600 capitalize">${report.priority}</span>
                    </div>
                </td>
                <td class="text-gray-600 text-xs">${timeAgo}</td>
                <td class="text-gray-600 text-xs">${lastUpdated}</td>
                <td class="text-gray-600">${report.assignedTo}</td>
                <td>
                    <div class="flex items-center space-x-2">
                        <button class="text-blue-600 hover:text-blue-800" onclick="viewMyReport('${report.id}')" title="View Report">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </button>
                        <button class="text-green-600 hover:text-green-800" onclick="editMyReport('${report.id}')" title="Edit Report">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                            </svg>
                        </button>
                        <button class="text-red-600 hover:text-red-800" onclick="deleteMyReport('${report.id}')" title="Delete Report">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                            </svg>
                        </button>
                    </div>
                </td>
            `;
            
            return row;
        }

        function updateStatistics() {
            const total = myReportsData.length;
            const inProgress = myReportsData.filter(r => r.status === 'processing' || r.status === 'pending' || r.status === 'validating').length;
            const completed = myReportsData.filter(r => r.status === 'completed').length;
            
            document.getElementById('totalSubmitted').textContent = total;
            document.getElementById('inProgressCount').textContent = inProgress;
            document.getElementById('completedCount').textContent = completed;
            
            // Animate counters
            anime({
                targets: '#totalSubmitted',
                innerHTML: [0, total],
                duration: 1000,
                easing: 'easeOutExpo',
                round: 1
            });
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredReports.length / reportsPerPage);
            const startIndex = (currentPage - 1) * reportsPerPage;
            const endIndex = Math.min(startIndex + reportsPerPage, filteredReports.length);
            
            document.getElementById('paginationInfo').textContent = 
                `Showing ${startIndex + 1} to ${endIndex} of ${filteredReports.length} results`;
            
            // Update pagination controls
            const paginationControls = document.getElementById('paginationControls');
            paginationControls.innerHTML = `
                <button class="px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}" 
                        onclick="previousPage()" ${currentPage === 1 ? 'disabled' : ''}>
                    Previous
                </button>
                <span class="px-3 py-2 bg-blue-600 text-white rounded-lg">${currentPage}</span>
                <button class="px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}" 
                        onclick="nextPage()" ${currentPage === totalPages ? 'disabled' : ''}>
                    Next
                </button>
            `;
        }

        // Filter functions
        function filterByStatus(status) {
            // Update active tab
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`tab-${status}`).classList.add('active');
            
            // Filter reports
            if (status === 'all') {
                filteredReports = [...myReportsData];
            } else {
                filteredReports = myReportsData.filter(report => report.status === status);
            }
            
            currentPage = 1;
            populateMyReportsTable();
        }

        function filterMyReports() {
            const searchTerm = document.getElementById('searchMyReports').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;
            const priorityFilter = document.getElementById('priorityFilter').value;
            
            filteredReports = myReportsData.filter(report => {
                const matchesSearch = !searchTerm || 
                    report.title.toLowerCase().includes(searchTerm) ||
                    report.id.toLowerCase().includes(searchTerm) ||
                    report.location.toLowerCase().includes(searchTerm);
                    
                const matchesCategory = !categoryFilter || report.category === categoryFilter;
                const matchesPriority = !priorityFilter || report.priority === priorityFilter;
                const matchesDate = !dateFilter || isWithinDateRange(report.submittedDate, dateFilter);
                
                return matchesSearch && matchesCategory && matchesPriority && matchesDate;
            });
            
            currentPage = 1;
            populateMyReportsTable();
        }

        function isWithinDateRange(dateString, filter) {
            const date = new Date(dateString);
            const now = new Date();
            
            switch (filter) {
                case 'today':
                    return date.toDateString() === now.toDateString();
                case 'week':
                    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                    return date >= weekAgo;
                case 'month':
                    const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                    return date >= monthAgo;
                case 'quarter':
                    const quarterAgo = new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000);
                    return date >= quarterAgo;
                case 'year':
                    const yearAgo = new Date(now.getTime() - 365 * 24 * 60 * 60 * 1000);
                    return date >= yearAgo;
                default:
                    return true;
            }
        }

        function clearSearch() {
            document.getElementById('searchMyReports').value = '';
            filterMyReports();
        }

        function refreshMyReports() {
            // Simulate refresh with animation
            const refreshButton = event.target;
            anime({
                targets: refreshButton,
                rotate: 360,
                duration: 600,
                easing: 'easeInOutQuad'
            });
            
            setTimeout(() => {
                populateMyReportsTable();
            }, 300);
        }

        // Pagination functions
        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                populateMyReportsTable();
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(filteredReports.length / reportsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                populateMyReportsTable();
            }
        }

        // Action functions
        function viewMyReport(reportId) {
            localStorage.setItem('selectedReportId', reportId);
            window.location.href = 'report-detail.html';
        }

        function editMyReport(reportId) {
            alert(`Edit report: ${reportId}`);
        }

        function deleteMyReport(reportId) {
            if (confirm(`Are you sure you want to delete report ${reportId}?`)) {
                // Remove from data array
                const index = myReportsData.findIndex(r => r.id === reportId);
                if (index > -1) {
                    myReportsData.splice(index, 1);
                    filteredReports = [...myReportsData];
                    populateMyReportsTable();
                    updateStatistics();
                }
            }
        }

        function exportMyReports() {
            alert('Exporting your reports to CSV...');
        }

        // Utility functions
        function formatStatus(status) {
            const statusMap = {
                'pending': 'Pending',
                'processing': 'In Progress',
                'validating': 'Waiting for Validation',
                'completed': 'Completed',
                'rejected': 'Rejected'
            };
            return statusMap[status] || status;
        }

        function getTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.ceil(diffDays / 7)} weeks ago`;
            return `${Math.ceil(diffDays / 30)} months ago`;
        }
    </script>
</body>
</html>